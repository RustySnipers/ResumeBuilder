# ResumeBuilder Production Environment Variables
# Copy this file to .env.production and fill in your production values

# ============================================================================
# PRODUCTION CONFIGURATION
# ============================================================================

# Environment
ENV=production
DEBUG=False
LOG_LEVEL=INFO

# ============================================================================
# SECURITY (CRITICAL - MUST GENERATE UNIQUE KEYS)
# ============================================================================

# Generate with: openssl rand -hex 32
SECRET_KEY=CHANGE_ME_GENERATE_UNIQUE_KEY_32_BYTES
JWT_SECRET_KEY=CHANGE_ME_GENERATE_UNIQUE_KEY_32_BYTES

# ============================================================================
# ANTHROPIC CLAUDE API
# ============================================================================

# Production API Key from console.anthropic.com
ANTHROPIC_API_KEY=sk-ant-your-production-api-key-here

# LLM Configuration
DEFAULT_MODEL=claude-sonnet-4-20250514
MAX_TOKENS=4096
TEMPERATURE=1.0

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Production PostgreSQL Database
# Examples:
# - AWS RDS: postgresql+asyncpg://user:pass@your-db.region.rds.amazonaws.com:5432/resumebuilder
# - Google Cloud SQL: postgresql+asyncpg://user:pass@/resumebuilder?host=/cloudsql/project:region:instance
# - Azure Database: postgresql+asyncpg://user@server:pass@server.postgres.database.azure.com:5432/resumebuilder
# - Self-hosted: postgresql+asyncpg://user:pass@db.example.com:5432/resumebuilder

DATABASE_URL=postgresql+asyncpg://production_user:CHANGE_ME_STRONG_PASSWORD@prod-db.example.com:5432/resumebuilder

# Database Connection Pool (adjust based on instance size)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=True

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Production Redis Cache
# Examples:
# - AWS ElastiCache: redis://your-redis.cache.amazonaws.com:6379
# - Google Memorystore: redis://10.0.0.3:6379
# - Azure Cache: redis://:password@your-redis.redis.cache.windows.net:6380?ssl=true
# - Self-hosted: redis://redis.example.com:6379

REDIS_URL=redis://prod-redis.example.com:6379

# Cache Configuration
CACHE_TTL_SECONDS=3600
EXPORT_CACHE_TTL=900

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Production domains only (comma-separated, no spaces)
ALLOWED_ORIGINS=https://app.resumebuilder.com,https://www.resumebuilder.com

# ============================================================================
# RATE LIMITING
# ============================================================================

# General API Rate Limits (per user)
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=5000

# Export Rate Limits (per user)
EXPORTS_PER_MINUTE=10
EXPORTS_PER_DAY=50
MAX_EXPORT_SIZE_MB=10

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4

# Application Base URL (for email links)
APP_BASE_URL=https://app.resumebuilder.com

# Trust proxy headers (if behind load balancer)
FORWARDED_ALLOW_IPS=*

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

# Log Level (ERROR | WARNING | INFO | DEBUG)
LOG_LEVEL=INFO
LOG_FORMAT=json

# Sentry Error Tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Datadog APM (optional)
# DD_AGENT_HOST=localhost
# DD_TRACE_ENABLED=true
# DD_SERVICE=resumebuilder
# DD_ENV=production

# ============================================================================
# EMAIL CONFIGURATION (Phase 5.2)
# ============================================================================

# Email Provider (smtp | sendgrid | aws_ses | console)
# Production recommendation: sendgrid or aws_ses
EMAIL_PROVIDER=smtp

# SMTP Configuration (if using EMAIL_PROVIDER=smtp)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=CHANGE_ME_YOUR_SENDGRID_API_KEY
SMTP_USE_TLS=true
SMTP_FROM=noreply@resumebuilder.com
SMTP_FROM_NAME=ResumeBuilder

# SendGrid Configuration (if using EMAIL_PROVIDER=sendgrid)
# SMTP_PASSWORD should contain your SendGrid API key
# The SendGrid Python library will be used automatically

# AWS SES Configuration (if using EMAIL_PROVIDER=aws_ses)
# Requires boto3 library and AWS credentials configured
# AWS_REGION=us-east-1

# Email Features:
# - Email verification on registration (24-hour token expiration)
# - Password reset with email (1-hour token expiration)
# - Welcome email after verification
# - Password changed notifications
# - Account locked notifications

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable/disable features
ENABLE_REGISTRATION=True
ENABLE_OAUTH=False
ENABLE_ANALYTICS=True
ENABLE_RATE_LIMITING=True
ENABLE_CACHING=True

# ============================================================================
# BACKUP & MAINTENANCE
# ============================================================================

# Maintenance mode
MAINTENANCE_MODE=False
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================

# Before deploying to production, ensure:
# [ ] SECRET_KEY and JWT_SECRET_KEY are unique, random 32-byte hex strings
# [ ] DEBUG=False
# [ ] Strong database password
# [ ] HTTPS enforced (configure reverse proxy/load balancer)
# [ ] CORS configured with specific production domains (not *)
# [ ] Database backups configured
# [ ] Redis persistence enabled
# [ ] Monitoring and alerting configured
# [ ] SSL/TLS certificates valid
# [ ] Firewall rules configured
# [ ] Rate limiting enabled
# [ ] Container runs as non-root user (already configured in Dockerfile)

# ============================================================================
# NOTES
# ============================================================================

# Security Best Practices:
# 1. Use secrets manager (AWS Secrets Manager, Google Secret Manager, Azure Key Vault)
# 2. Rotate credentials regularly (API keys, database passwords, JWT secrets)
# 3. Use IAM roles instead of hardcoded credentials when possible
# 4. Enable SSL/TLS for all connections
# 5. Keep dependencies updated
# 6. Monitor for security vulnerabilities

# Performance Optimization:
# 1. Set WORKERS = (2 x CPU cores) + 1
# 2. Configure database connection pool based on instance size
# 3. Use Redis for caching and rate limiting
# 4. Enable CDN for static assets
# 5. Use connection pooling for database and Redis

# High Availability:
# 1. Run multiple API instances behind load balancer
# 2. Use managed database with automatic failover
# 3. Use Redis cluster or managed Redis service
# 4. Configure health checks and auto-scaling
# 5. Set up monitoring and alerting
